function checkCollapseState(){if($.cookie("GeneValidator_adv_params_status")){var e=$.cookie("GeneValidator_adv_params_status");if("open"===e){var t=document.getElementById("adv_params_btn");t.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Hide Advanced Parameters',$("#adv_params").addClass("in")}}}function keepFooterFixedToBottom(){$("#mainbody").css({"margin-bottom":$("#footer").height()+15+"px"}),$(window).resize(function(){$("#mainbody").css({"margin-bottom":$("#footer").height()+15+"px"})})}function addSeqValidation(){jQuery.validator.addMethod("checkInputType",function(e){if(types=[],">"===e.charAt(0)){seqs_array=e.split(">");for(var t=1;t<seqs_array.length;t++)if(lines=seqs_array[t].split("\n"),0!==lines.length&&(clean_lines=jQuery.grep(lines,function(e){return e}),0!==clean_lines.length)){clean_lines.shift(),seq=clean_lines.join("");var a=checkType(seq,.9);if(types.push(a),"protein"!==a&&"dna"!==a&&"rna"!==a)return!1}for(var n=types[0],t=0;t<types.length;t++)if(types[t]!==n)return!1;return!0}var a=checkType(e,.9);return"protein"!==a&&"dna"!==a&&"rna"!==a?!1:!0},"* The Input must be either genetic or protein Sequence(s). Please ensure that your sequences do not contains any non-letter character(s). If there are multiple sequences, ensure that they are all of one type. ")}function inputValidation(){var e=$("#seq").attr("data-maxCharacters");$("#input").validate({rules:{seq:{minlength:5,required:!0,checkInputType:!0,maxlength:e},"validations[]":{required:!0}},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){if("validations_group"===t.parent().parent().attr("id")){var a=document.getElementById("lastValidation");e.insertAfter(a)}else e.insertAfter(t.parent(".input-group").length?t.parent():t)},submitHandler:function(){$("#spinner").modal({backdrop:"static",keyboard:"false"}),ajaxFunction()}})}function ajaxFunction(){$.ajax({type:"POST",url:"input",data:$("#input").serialize(),success:function(e){$("#results_box").show(),$("#output").html(e),initTableSorter(),$("[data-toggle='tooltip']").tooltip(),removeEmptyColumns(),$("#spinner").modal("hide")},error:function(e){if(500==e.status){var t=e.responseText;$("#results_box").show(),$("#output").html(t),$("#spinner").modal("hide")}else{var t=e.responseText;$("#results_box").show(),$("#output").html("There seems to be an unidentified Error."),$("#spinner").modal("hide")}}})}function initTableSorter(){$.tablesorter.addParser({id:"star_scores",is:function(){return!1},format:function(e,t,a,n){var r=$(a);return 2===n?r.attr("data-score")||e:e},parsed:!1,type:"numeric"}),$("table").tablesorter({headers:{2:{sorter:"star_scores"}}})}function removeEmptyColumns(){$("#sortable_table tr th").each(function(e){var t=$(this).parents("table").find("tr td:nth-child("+(e+1)+")");$(this).hasClass("chart-column")||""==$(this).text().trim()&&($(this).hide(),t.hide())})}function changeAdvParamsBtnText(){var e=document.getElementById("adv_params_btn");'<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Show Advanced Parameters'===e.innerHTML?(e.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Hide Advanced Parameters',$("#adv_params").collapse("show"),$.cookie("GeneValidator_adv_params_status","open")):(e.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Show Advanced Parameters',$("#adv_params").collapse("hide"),$.cookie("GeneValidator_adv_params_status","closed"))}$(document).ready(function(){checkCollapseState(),keepFooterFixedToBottom(),addSeqValidation(),inputValidation(),$(document).bind("keydown",function(e){e.ctrlKey&&13===e.keyCode&&$("#input").trigger("submit")})}),checkType=function(e,t,a,n){void 0===t&&(t=.9),void 0===a&&(a=1e4),void 0===n&&(n=1);var r=e.slice(n-1,a),s=r.length,i=(r.match(/[ACG]/gi)||[]).length/s,o=(r.match(/[T]/gi)||[]).length/s,l=(r.match(/[U]/gi)||[]).length/s,c=(r.match(/[ARNDCQEGHILKMFPSTWYV\*]/gi)||[]).length/s;return i+o>=t||i+l>=t?o>=l?"dna":l>=o?"rna":"dna":c>=t?"protein":void 0};